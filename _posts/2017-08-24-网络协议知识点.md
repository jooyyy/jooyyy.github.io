---
layout:     post
title:      网络协议知识点
subtitle:   
date:       2017-08-24
author:     Joy
header-img: img/page-bg-people.png
catalog: true
tags:
    - 网络	
    - TCP、UDP、HTTP
---

#### TPC/IP、HTTP、Socket的区别

OSI 七层模型

* 应用层：文件传输、电子邮件、文件服务、虚拟终端     HTTP、FTP、SMTP、DNS、Telnet
* 展示层：数据格式化，代码转换，数据加密
* 会话层：解除或建立与其他接点的联系
* 传输层：提供端对端的接口    TCP、UDP
* 网络层：为数据包选择路由   IP、ICMP
* 数据链路层：传输有地址的帧，错误检测    PPP、ARP、MTU协议
* 物理层：二进制数据形式在物理媒体上传输数据



##### TCP/IP和HTTP协议的关系

> 我们在传输数据时，可以只使用（传输层）TPC/IP协议，但那样的话，如果没有应用层，便无法识别数据内容，如果想要使传输的数据有意义，则必须使用到应用层协议。WEB使用HTTP作为应用层协议以封装HTTP文本信息，然后TCP/IP做传输层协议将它转发到网络上，所以HTTP是建立在TCP之上的。（DNS协议是TCP、UDP都可以）

##### Socket 是啥

> 实际上Socket是对TCP/IP协议的封装，Socket本身不是协议，而是一个调用接口（API），通过Socket，我们才能使用TCP/IP协议。实际上Socket和TCP/IP没有必然的联系。Socket对TCP/IP协议进行了抽象，从而形成了我们知道的一些最常用的接口，比如listen、accept、send、read和write等等。

##### Socket建立网络连接的过程

> 建立Socket连接至少需要一对套接字：ClientSocket和ServerSocket，建立连接过程分为三个步骤
>
> * 服务器监听
> * 客户端请求：描述要请求的服务端的套接字，指出服务器的IP和端口号，然后发起请求
> * 连接确认：服务端收到客户端请求之后，把套接字的描述发给客户端，客户端确认描述之后，双方正式建立连接。服务端继续监听接收其他客户端套接字的连接请求

##### TCP建立网络连接的过程（三次握手）

> * Client （syn=j） —> Server
> * Server (ack=j+1) （syn=k） —> Client
> * Client （ack=k+1) —> Server
>
> 与之相关的一些常见的知识点，比如说SYN攻击，一般来说就是攻击者对服务器进行大量不完整的TCP请求（缺少第三步），服务器没有收到客户端第三次反馈，就会处于一个等待的状态，短时间大量未完成的请求让服务器资源耗尽，正常的SYN被丢弃，严重会引起网络堵塞瘫痪。
>
> 防范方案：
>
> * 过滤
> * 增加积压
> * 减少SYN-RECEIVED定时
> * SYN缓存
> * 防火墙和代理