---
layout:     post
title:      EOS 相关归纳
subtitle:   
date:       2018-05-22
author:     Joy
header-img: img/page-bg-people.png
catalog: true
tags:
    - EOS blockchain
---


EOS 主网上线在即，目前最火的周边工具类应用就是 EOS 钱包映射工具，映射的原因和原理：
* 原因：EOS 在 ETH 平台上完成众筹之后，会迁移到自己的主网上，需要将 ETH 地址上的 EOS 代币数量1:1转移到 EOS 链上。
* 原理：映射用到的合约源码如下 --
	```
	function register(string key) {
		assert(today() <= numberOfDays + 1);
		assert(bytes(key).length <= 64);
		keys[msg.sender] = key;
		LogRegister(msg.sender, key);
	}
	```	
	要求在众筹结束后的一天之内，提供一个64个字符以内的 EOS 地址，用 keys map 将调用合约的 ETH 地址和这个提供的 EOS 地址关联起来，最后记录 Log。 

#### EOS 钱包生成过程

* 首先生成256位随机数，假设得到这个结果
	> p = "0x662391c59b82a93fc6d67726f825537b749ac019839c038be9eea2a67a982d2c"  // 16进制表示
* 接着对这一串结果进行 WIF 处理
	> WIF 



#### EOS account 数据结构
通过get_account接口可以拿到account的数据内容
```
eg:
{
	"account_name": "eosio",
	"permissions": [{
		"perm_name": "active",
		"parent": "owner",
		"required_auth": {
			"threshold": 1,
			"keys": [{
				"key": "EOS6M......",
				"weight": 1
			}],
			"accounts": []
		}       
	
	}, 
	{
		"perm_name": "owner",
		"parent": "",
		"requied_auth": {
			"threshold": 1,
			"keys": [{
				"key": 	"EOS6M......",
				"weight": 1
			}],
			"accounts": []
		},		
	}]
}
```
从数据结构可以看到一个account有多个permission，一个permission下有多个key，这里的key看上去就是wallet的公钥格式，外带一个权重weight。
> An account is a human-readable identifier that is stored on the blockchain. Every transaction has its permissions evaluated under the configured authority of an account. Each named permission has a threshold that must be met for a transaction signed under that authority to be considered valid. Transactions are signed by utilizing a client that has a loaded and unlocked wallet. A wallet is software that protects and makes use of your keys. These keys may or may not be granted permission to an account authority on the blockchain.

